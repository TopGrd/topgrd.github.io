<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="utf-8">
<meta name="description" content="The last theme you&#39;ll ever need. Maybe.">
<meta name="generator" content="Hugo 0.55.6" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" type="text/css">
<link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/styles/ocean.min.css">
<link rel="alternate" href="/index.xml" type="application/rss+xml" title="TopGrd&#39;s Blog">
<title>Prettier &#43; Eslint =&gt; ğŸ’– - TopGrd&#39;s Blog</title>
</head>
<body>

<header>
  <div class="container clearfix">
    <a class="path" href="http://topgrd.github.io/">[TopGrd&#39;s Blog]</a>
    <span class="caret"># _</span>
    <div class="right">
      
    </div>
  </div>
</header>

<div class="container">


<main role="main" class="article">
  
<article class="single" itemscope itemtype="http://schema.org/BlogPosting">
  <div class="meta">

    <span class="key">published on</span>
    <span class="val"><time itemprop="datePublished" datetime="2018-12-03">December 03, 2018</time></span>



  </div>
  <h1 class="headline" itemprop="headline">Prettier &#43; Eslint =&gt; ğŸ’–</h1>
  <section class="body" itemprop="articleBody">
    

<h1 id="prettier">Prettier</h1>

<h2 id="ä¸ºä»€ä¹ˆè¦ç”¨-prettier">ä¸ºä»€ä¹ˆè¦ç”¨ Prettierï¼Ÿ</h2>

<p>å…³äºä»£ç é£æ ¼çš„åœ£æˆ˜ï¼Œä»åˆ°åº•è¦ä¸è¦åˆ†å·ï¼Œç¼©è¿›ç”¨tabè¿˜æ˜¯spaceï¼Œ2ä¸ªè¿˜æ˜¯4ä¸ªç©ºæ ¼ï¼Œä»æœªåœæ­¢è¿‡ã€‚ä½†æ˜¯ä½œä¸ºç°ä»£javascript å¼€å‘è€…ï¼Œwho cares ! æˆ‘ä»¬ä½¿ç”¨eslint å°±å¯ä»¥è½»æ¾çš„æ§åˆ¶å›¢é˜Ÿçš„ä»£ç é£æ ¼ï¼Œä½†æ˜¯ eslint åœ¨æŸäº›æ–¹é¢å°±æ— æ³•å¼ºåˆ¶äº†ï¼Œä¸‹é¢2ä»½ä»£ç </p>

<pre><code class="language-js">if (a &lt; 1) {
    console.log('haha');
}
</code></pre>

<pre><code class="language-js">if (a &lt; 1) 
{
 console.log('haha');
}
</code></pre>

<p>Eslint éƒ½ä¸ä¼šæŠ¥é”™ï¼Œè¿˜æœ‰ trailing commasï¼Œ<a href="https://medium.com/@nikgraf/why-you-should-enforce-dangling-commas-for-multiline-statements-d034c98e36f8">Why you should enforce Dangling Commas for Multiline Statements</a> ç­‰ç­‰ã€‚è€Œprettier +  eslint å¯ä»¥å®Œç¾çš„é¿å…è¿™äº›é£æ ¼ä¸ç»Ÿä¸€çš„é—®é¢˜ã€‚å½“ä½ çš„é£æ ¼ä¸å›¢é˜Ÿ eslint é…ç½®æœ‰ä¸åŒæ—¶ï¼Œåªéœ€è¦prettierä¸€ä¸‹ï¼Œå°±å¯ä»¥ä¿æŒä¸€è‡´ï¼Œä¸éœ€è¦åœ¨å†™ä»£ç æ—¶å…³å¿ƒå·®å¼‚ï¼Œå¹¶ä¸” prettier ä¹Ÿæ˜¯å½“å‰æœ€ç«çš„ä¸€æ¬¾ format å·¥å…·ï¼Œå¾ˆå¤šå¼€æºé¡¹ç›®ä¸‹é¢ï¼Œä½ ä¼šå‘ç°éƒ½ä¼šæœ‰ä¸€ä»½ <code>.prettierrc</code></p>

<blockquote>
<p>By far the biggest reason for adopting Prettier is to stop all the on-going debates over styles. It is generally accepted that having a common style guide is valuable for a project and team.</p>

<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œé‡‡ç”¨Prettierçš„æœ€å¤§åŸå› æ˜¯åœæ­¢æ‰€æœ‰å…³äºé£æ ¼çš„äº‰è®ºã€‚äººä»¬æ™®éè®¤ä¸ºï¼Œæ‹¥æœ‰ä¸€ä¸ªå…±åŒçš„é£æ ¼æŒ‡å—å¯¹äºé¡¹ç›®å’Œå›¢é˜Ÿæ¥è¯´æ˜¯æœ‰ä»·å€¼çš„ã€‚
<a href="https://prettier.io/">Prettier Â· Opinionated Code Formatter</a></p>
</blockquote>

<h2 id="ä½¿ç”¨æ–¹å¼">ä½¿ç”¨æ–¹å¼</h2>

<p>ä½¿ç”¨å‰æœ€å¥½èƒ½ç”Ÿæˆä¸€ä»½ prettier é…ç½®æ–‡ä»¶<a href="https://prettier.io/docs/en/configuration.html">Configuration File Â· Prettier</a>ï¼Œæ”¾åœ¨ä½ éœ€è¦æ ¼å¼åŒ–çš„é¡¹ç›®ç›®å½•ä¸‹ã€‚å¦‚æœéœ€è¦ï¼Œé…ç½®ä¸€ä»½<code>.prettierignore</code> . è§„åˆ™å’Œ<code>gitignore</code>ä¸€æ ·ï¼Œå…¶ä¸­çš„æ–‡ä»¶ä¸ä¼šè¢«å¤„ç†ã€‚</p>

<ol>
<li><p>CLI ä½¿ç”¨
é¦–å…ˆä½¿ç”¨</p>

<pre><code class="language-shell">npm install --save-dev --save-exact prettier
// or globally
npm install --global prettier
</code></pre>

<p>æ ¼å¼åŒ–è‡ªå·±é¡¹ç›®ç›®å½•ä¸‹æ–‡ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨
<code>prettier --write 'src/**/*.js'</code>
ç›®å½•ä½¿ç”¨çš„æ˜¯<a href="https://github.com/isaacs/node-glob/blob/master/README.md#glob-primer">node-glob</a>è¯­æ³•ã€‚
2. ç¼–è¾‘å™¨æ’ä»¶
* <a href="https://packagecontrol.io/packages/JsPrettier">sublime</a>
* <a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode">Prettier - Code formatter - Visual Studio Marketplace</a>
* <a href="https://prettier.io/docs/en/webstorm.html">webstorm</a>
* <a href="https://prettier.io/docs/en/vim.html">Vim Setup Â· Prettier</a>
* <a href="https://github.com/prettier/prettier-atom">atom</a>
3. <strong>é…åˆ eslint ä½¿ç”¨</strong>
é¦–å…ˆåœ¨é¡¹ç›®ä¸‹å®‰è£…
<code>npm install -D eslint-plugin-prettier eslint-config-prettier</code>
ç„¶åå¯¹<code>.eslintrc</code>è¿›è¡Œç›¸å…³é…ç½®</p>

<pre><code class="language-json">{
&quot;parser&quot;: &quot;babel-eslint&quot;,
&quot;extends&quot;: [&quot;eslint-config-hcb&quot;, &quot;prettier&quot;],
&quot;plugins&quot;: [&quot;prettier&quot;],
&quot;rules&quot;: {
&quot;prettier/prettier&quot;: &quot;error&quot;
},
&quot;globals&quot;: {},
&quot;parserOptions&quot;: {
&quot;ecmaFeatures&quot;: {
  &quot;legacyDecorators&quot;: true
}
}
}
</code></pre>

<p><code>eslint-plugin-prettier</code> æ’ä»¶ä¼šè°ƒç”¨ prettier å¯¹ä½ çš„ä»£ç é£æ ¼è¿›è¡Œæ£€æŸ¥ã€‚ä¹Ÿå°±æ˜¯ä»–ä¼šä½¿ç”¨prettieræ ¼å¼åŒ–ä½ çš„ä»£ç , ç„¶åæ¯”è¾ƒæ ¼å¼åŒ–å‰åçš„ä»£ç ï¼Œä¸ä¸€è‡´çš„åœ°æ–¹ä¼šåƒeslinté‚£æ ·æŠ¥é”™ã€‚
<img src="https://user-images.githubusercontent.com/4202848/49361264-7fc8b000-f716-11e8-8ed8-f29e73046471.png" alt="image" /></p></li>
</ol>

<p>å½“ç„¶ä½ ä¸éœ€è¦é©¬ä¸Šæ‰‹åŠ¨æ”¹ï¼Œä½ å¯ä»¥ç›´æ¥ç”¨prettier cli æˆ–è€…ç¼–è¾‘å™¨æ’ä»¶è¿›è¡Œæ ¼å¼åŒ–ã€‚
<code>eslint-config-prettier</code>èƒ½å¤Ÿå…³é—­ä¸å¿…è¦æˆ–è€…ä¸prettierå†²çªçš„lint é€‰é¡¹ï¼Œå°¤å…¶æ˜¯ä¸å¸Œæœ›ä¸€ä¸ª error å‡ºç°2æ¬¡ï¼Œä½†æ˜¯æˆ‘ä»¬è¦ç¡®ä¿ prettier åœ¨ eslint é…ç½®é‡Œextendsçš„æœ€åã€‚
4. åœ¨pre-commit é’©å­é‡Œä½¿ç”¨
Prettier ä¸ eslint å’Œ pre-commit é’©å­ä½¿ç”¨å¯è°“æ˜¯æœ€ä½³å®è·µï¼ŒæŒ‰ç¬¬ä¸‰æ¡é…å¥½eslint å’Œ prettier åï¼Œåœ¨ é¡¹ç›® <code>package.json</code> é‡Œè¿›è¡Œé…ç½®</p>

<pre><code class="language-json">&quot;scripts&quot;: {
    &quot;eslint&quot;: &quot;eslint src&quot;,
    &quot;precommit&quot;: &quot;prettier --write 'src/**/*.js' &amp;&amp; npm run eslint&quot;,
    &quot;commitmsg&quot;: &quot;commitlint -E GIT_PARAMS&quot;,
    &quot;start&quot;: &quot;galileo server -p 8900&quot;,
    &quot;dev&quot;: &quot;galileo build dev&quot;,
    &quot;qa&quot;: &quot;galileo build qa&quot;,
    &quot;pub&quot;: &quot;galileo build prod --static pub&quot;,
    &quot;prod&quot;: &quot;galileo build prod&quot;,
    &quot;prettier&quot;: &quot;prettier --write 'src/**/*.js'&quot;
  }
</code></pre>

<p>è¿™æ ·æ¯æ¬¡æäº¤ä»£ç æ—¶ä¼šè‡ªåŠ¨å¸®ä½ æ ¼å¼åŒ–ä»£ç å¹¶è¿›è¡Œ eslint æ ¡éªŒã€‚</p>

<blockquote>
<p>é“¾æ¥
<a href="https://www.youtube.com/watch?v=hkfBvpEfWdA">âš¡ï¸ - James Long - A Prettier Printer (plus bonus clip!) - React Conf 2017 - YouTube</a>
<a href="https://www.youtube.com/watch?v=0Q4kUNx85_4">Javascript code formatting - Christopher Chedeau, React London 2017 - YouTube</a></p>
</blockquote>

  </section>
</article>

</main>

</div>

<footer>
  <div class="container">
    <span class="copyright">&copy; 2019 TopGrd&#39;s Blog - <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></span>
  </div>
</footer>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

